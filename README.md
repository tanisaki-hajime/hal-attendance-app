# PHP後期評価課題：会員管理システム

1年間のPHPの授業の集大成として作成した、会員情報の管理システムです。
基本機能（CRUD）に加え、画像処理やセキュリティ（ハッシュ化）、論理削除などを実装しました。

## 動作環境
* XAMPP (Windows / Mac)
* PHP 8.x
* MySQL (MariaDB)

## 機能一覧
1. **会員登録**
   - 入力チェック（必須、メール形式、重複など）
   - 画像アップロードとGDライブラリによるサムネイル生成
   - 確認画面の表示
   - パスワードのハッシュ化保存
2. **ログイン・ログアウト**
   - Cookieを使用したログイン状態の保持（2週間）
3. **会員一覧**
   - ページネーション機能（10件ごとに表示）
   - 削除済みユーザー（論理削除）の非表示
4. **会員詳細**
   - 画像の元サイズ表示
5. **会員編集**
   - 登録情報の変更
   - パスワード変更（入力がある場合のみ更新）
   - 変更前の確認画面
6. **会員削除**
   - 削除確認画面の表示
   - `deleted_at` カラムを使用した論理削除

## ディレクトリ構成
kadai/
 ├─ db_config.php      ... データベース接続設定
 ├─ Readme.txt         ... このファイル
 └─ 10/                ... プログラム本体
     ├─ style.css      ... デザイン用CSS
     ├─ images/        ... 画像保存先（書き込み権限必要）
     ├─ tpl/           ... 表示用テンプレートファイル群
     ├─ index.php      ... 会員一覧（トップ）
     ├─ entry.php      ... 会員登録
     ├─ login.php      ... ログイン
     ├─ detail.php     ... 詳細表示
     ├─ edit.php       ... 編集
     └─ delete.php     ... 削除処理

## セットアップ手順（採点時の注意）

1. **データベースの準備**
   phpMyAdminにてデータベース `ph_user_db` を作成し、同梱の `ph_user_db.sql` をインポートしてください。
   （初期データとして50件ほどのダミーデータが入っています）

2. **ファイルの配置**
   `10` フォルダと `db_config.php` の配置関係を変えないでください。
   プログラム内から `../db_config.php` を読み込んでいます。

3. **権限の設定（Macの場合）**
   `10/images/` フォルダに対して、書き込み権限（読み書き）を付与してください。

4. **動作確認**
   ブラウザで `10/login.php` にアクセスしてください。
   ※ダミーデータのパスワードはハッシュ化されていて不明なため、**最初に「新規登録」から新しいユーザーを作成してログインしてください。**

## 工夫した点・苦労した点
* **ロジックと表示の分離**
  プログラムが見やすくなるように、処理を行うファイル（ルート）と、HTMLを表示するファイル（`tpl/`）を分けました。
* **サムネイル作成**
  画像アップロード時に、GDライブラリを使ってリサイズし、一覧画面が重くならないようにしました。
* **論理削除の実装**
  間違って削除してもデータが残るよう、物理削除ではなくフラグによる論理削除を採用しました。


